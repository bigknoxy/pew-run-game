<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, height=device-height, viewport-fit=cover">
    <title>Pew Run</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">

    <!-- iOS App Icons (multiple sizes) -->
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="icons/icon-167.png">
    <link rel="apple-touch-icon" sizes="120x120" href="icons/icon-120.png">
    <link rel="apple-touch-icon-precomposed" sizes="180x180" href="icons/icon-180.png">
    
    <!-- Android Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- iOS Splash Screen -->
    <link rel="apple-touch-startup-image" href="icons/splash.svg">
    
    <!-- Apple PWA -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Pew Run">

    <!-- Theme Color -->
    <meta name="theme-color" content="#4ecdc4">
    <meta name="description" content="Pew Run - A fast-paced 2D space shooter. Dodge obstacles, collect power-ups, and fight bosses in this action-packed arcade game.">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self'">

    <link rel="stylesheet" href="style.css?v=4">
</head>
<body>
<!-- Splash Screen -->
<div id="splashScreen" onclick="dismissSplashDirect()">
    <div class="splash-content">
        <h1 class="splash-title">PEW RUN</h1>
        <p class="splash-version">Version 1.0</p>
        <div class="splash-loading">
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
        <p class="splash-tap">Tap to Start</p>
    </div>
</div>
    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
        <div id="ui">
            <div id="score">Score: <span id="scoreValue">0</span></div>
            <div id="health">Health: <span id="healthValue">100</span></div>
            <div id="ammo">Ammo: <span id="ammoValue">30</span></div>
            <div id="gems">üíé <span id="gemsValue">0</span></div>
        </div>
        <!-- Add wave display -->
            <div id="waveUI">
            <span>WAVE: </span><span id="waveDisplay">1</span>
        </div>
        <!-- Tutorial UI -->
        <div id="tutorialUI" class="hidden">
            <span>TUTORIAL</span>
        </div>
        <!-- Add pause button (positioned in corner for easy access) -->
        <button id="pauseBtn" class="hidden" aria-label="Pause">‚è∏Ô∏è</button>
        <button id="soundBtn" class="hidden" aria-label="Toggle sound">üîä</button>
        <button id="musicBtn" class="hidden" aria-label="Toggle music">üéµ</button>
        <!-- Add wave announcement overlay (positioned after pause button for proper z-index) -->
        <div id="waveAnnouncement" class="wave-overlay hidden">
            <div class="wave-content">
                <h2 class="wave-title">WAVE</h2>
                <div class="wave-number" id="waveAnnouncementNumber">1</div>
                <p class="wave-subtitle">Get Ready!</p>
            </div>
        </div>
        <!-- Settings Button -->
        <button id="settingsBtn" class="hidden" aria-label="Settings">‚öôÔ∏è</button>
        <!-- Daily Rewards Button -->
        <button id="dailyRewardsBtn" class="hidden" aria-label="Daily rewards">üéÅ</button>

        <!-- Settings Panel -->
        <div id="settingsPanel" class="overlay hidden">
            <div class="settings-content">
                <h2>SETTINGS</h2>
                
                <div class="setting-row">
                    <span>Sound</span>
                    <button id="soundToggle" class="toggle-btn">ON</button>
                </div>
                
                <div class="setting-row">
                    <span>Music</span>
                    <button id="musicToggle" class="toggle-btn">ON</button>
                </div>
                
                <div class="setting-row">
                    <span>Graphics</span>
                    <button id="graphicsToggle" class="toggle-btn">HIGH</button>
                </div>
                
                <div class="setting-row">
                    <span>Vibration</span>
                    <button id="vibrationToggle" class="toggle-btn">ON</button>
                </div>
                
                <div class="setting-row">
                    <a href="privacy-policy.html" id="privacyLink" target="_blank" rel="noopener noreferrer">Privacy Policy</a>
                </div>
                
                <button id="closeSettingsBtn" class="close-btn">CLOSE</button>
            </div>
        </div>

        <!-- How to Play Panel -->
        <div id="howToPlayPanel" class="overlay hidden">
            <div class="how-to-play-content">
                <h2>HOW TO PLAY</h2>

                <div class="htp-section">
                    <h3>CONTROLS</h3>
                    <p>Drag to move ¬∑ Auto-fire is always on</p>
                </div>

                <div class="htp-section">
                    <h3>POWER-UPS</h3>
                    <div class="htp-items">
                        <div class="htp-item">
                            <span class="htp-icon" style="background:#2ecc71">+</span>
                            <span>Health (+30 HP)</span>
                        </div>
                        <div class="htp-item">
                            <span class="htp-icon" style="background:#3498db">A</span>
                            <span>Ammo (+10)</span>
                        </div>
                        <div class="htp-item">
                            <span class="htp-icon" style="background:#f1c40f">S</span>
                            <span>Shield (blocks 1 hit)</span>
                        </div>
                        <div class="htp-item">
                            <span class="htp-icon" style="background:#e67e22">R</span>
                            <span>Rapid Fire (2x speed)</span>
                        </div>
                    </div>
                </div>

                <div class="htp-section">
                    <h3>OBSTACLES</h3>
                    <div class="htp-items">
                        <div class="htp-item">
                            <span class="htp-icon htp-box"></span>
                            <span>Crate (30 damage)</span>
                        </div>
                        <div class="htp-item">
                            <span class="htp-icon htp-spike"></span>
                            <span>Spike (30 damage)</span>
                        </div>
                    </div>
                </div>

                <div class="htp-section">
                    <h3>ENEMIES</h3>
                    <p>Basic ‚Üí Fast ‚Üí Tank ‚Üí Shooter</p>
                    <p>Boss every 5 waves</p>
                </div>

                <button id="closeHowToPlayBtn" class="close-btn">CLOSE</button>
            </div>
        </div>

        <!-- Daily Rewards Panel -->
        <div id="dailyRewardsPanel" class="overlay hidden">
            <div class="daily-rewards-content">
                <h2>DAILY REWARDS</h2>
                
                <div class="streak-display">
                    <span id="streakCount">0</span> Day Streak
                </div>
                
                <div class="rewards-grid">
                    <div class="reward-day" data-day="1">
                        <div class="reward-icon">üíé</div>
                        <div class="reward-amount">50</div>
                        <div class="reward-label">Day 1</div>
                    </div>
                    <div class="reward-day" data-day="2">
                        <div class="reward-icon">üíé</div>
                        <div class="reward-amount">100</div>
                        <div class="reward-label">Day 2</div>
                    </div>
                    <div class="reward-day" data-day="3">
                        <div class="reward-icon">üíé</div>
                        <div class="reward-amount">150</div>
                        <div class="reward-label">Day 3</div>
                    </div>
                    <div class="reward-day" data-day="4">
                        <div class="reward-icon">üíé</div>
                        <div class="reward-amount">200</div>
                        <div class="reward-label">Day 4</div>
                    </div>
                    <div class="reward-day" data-day="5">
                        <div class="reward-icon">üíé</div>
                        <div class="reward-amount">300</div>
                        <div class="reward-label">Day 5</div>
                    </div>
                    <div class="reward-day" data-day="6">
                        <div class="reward-icon">üíé</div>
                        <div class="reward-amount">400</div>
                        <div class="reward-label">Day 6</div>
                    </div>
                    <div class="reward-day" data-day="7">
                        <div class="reward-day-large">
                            <div class="reward-icon">üíé</div>
                            <div class="reward-amount">1000</div>
                            <div class="reward-label">DAY 7</div>
                        </div>
                    </div>
                </div>
                
                <div class="next-reward-info">
                    <p>Next reward in: <span id="nextRewardTimer">--:--</span></p>
                </div>
                
                <button id="claimDailyBtn" class="claim-btn">CLAIM REWARD</button>
                <button id="closeDailyBtn" class="close-btn">CLOSE</button>
            </div>
        </div>

        <!-- Tutorial Overlay -->
        <div id="tutorialOverlay" class="overlay hidden">
            <div class="tutorial-content">
                <div id="tutorialStep" class="tutorial-step">
                    <div class="tutorial-highlight" id="tutorialHighlight"></div>
                    <div class="tutorial-text" id="tutorialText"></div>
                    <div class="tutorial-progress">
                        <div class="tutorial-progress-bar" id="tutorialProgress"></div>
                    </div>
                </div>
                <button id="tutorialSkipBtn" class="skip-btn">SKIP</button>
            </div>
        </div>

        <!-- Tutorial Hint Display -->
        <div id="tutorialHint" class="hidden">
            <span id="hintText"></span>
        </div>

        <!-- Daily Reward Notification -->
        <div id="dailyRewardNotification" class="notification hidden">
            <div class="notification-content">
                <span class="notification-icon">üéÅ</span>
                <span class="notification-text">Daily Reward Ready!</span>
            </div>
        </div>
        <div id="playerHighlight" class="hidden">
            <div id="playerHighlightBox"></div>
        </div>
        <!-- Add pause menu overlay -->
        <div id="pauseMenu" class="overlay hidden">
            <div class="pause-content">
                <h2>PAUSED</h2>
                <button id="resumeBtn">RESUME</button>
                <button id="restartFromPauseBtn">RESTART</button>
                <button id="quitBtn">QUIT TO MENU</button>
                <button id="pauseShopBtn" class="shop-open-btn">SHOP</button>
                <button id="pauseHowToPlayBtn">HOW TO PLAY</button>
            </div>
        </div>
        <!-- Add boss health bar -->
        <div id="bossHealthBar" class="hidden">
            <div id="bossName">BOSS</div>
            <div id="bossHealthContainer">
                <div id="bossHealthFill"></div>
            </div>
        </div>
        <div id="startScreen" class="overlay">
            <h1>PEW RUN</h1>
           <p>Auto-shoot, drag to move left/right</p>
           <p>High Score: <span id="startHighScore">0</span></p>
            <button id="startBtn">START</button>
            <button id="shopBtn" class="shop-open-btn">SHOP</button>
            <button id="howToPlayBtn">HOW TO PLAY</button>
        </div>
        <div id="gameOverScreen" class="overlay hidden">
            <h1>GAME OVER</h1>
            <div id="newHighScoreEl" class="new-high-score hidden">NEW HIGH SCORE!</div>
            <p>Score: <span id="finalScore">0</span></p>
            <p>High Score: <span id="highScoreDisplay">0</span></p>
            <p>Wave Reached: <span id="waveReachedDisplay">1</span></p>
            <p>Gems Earned: <span id="gemsEarnedDisplay">0</span></p>
            <p>Enemies Killed: <span id="enemiesKilledDisplay">0</span></p>
            <p>Total Games: <span id="totalGamesDisplay">0</span></p>
            <p>Total Enemies: <span id="totalEnemiesDisplay">0</span></p>
            <button id="restartBtn">RESTART</button>
            <button id="gameOverShopBtn" class="shop-open-btn">SHOP</button>
        </div>

        <!-- Revive Prompt -->
        <div id="revivePrompt" class="overlay hidden">
            <div class="revive-content">
                <h2>REVIVE?</h2>
                <p class="revive-desc">Continue with 50% health</p>
                <div class="revive-timer" id="reviveTimer">5</div>
                <button id="reviveBtn" class="revive-btn">REVIVE (1 token)</button>
                <button id="reviveSkipBtn" class="close-btn">GIVE UP</button>
            </div>
        </div>

        <!-- Shop Panel -->
        <div id="shopPanel" class="overlay hidden">
            <div class="shop-content">
                <h2>SHOP</h2>
                <p class="shop-gems-display">Gems: <span id="shopGemsDisplay">0</span></p>
                <div class="shop-grid">
                    <div class="shop-item" data-item="revive">
                        <div class="shop-icon">+1</div>
                        <div class="shop-name">Extra Life</div>
                        <div class="shop-desc">Revive once per game</div>
                        <div class="shop-owned" id="reviveCount">0 owned</div>
                        <button class="shop-buy-btn" data-item="revive" data-cost="500">500 gems</button>
                    </div>
                    <div class="shop-item" data-item="ammoBoost">
                        <div class="shop-icon">+10</div>
                        <div class="shop-name">Ammo Boost</div>
                        <div class="shop-desc">Start with +10 ammo</div>
                        <div class="shop-owned" id="ammoBoostStatus">Not owned</div>
                        <button class="shop-buy-btn" data-item="ammoBoost" data-cost="200">200 gems</button>
                    </div>
                    <div class="shop-item" data-item="skin_red">
                        <div class="shop-icon" style="color:#ff6b6b">Ship</div>
                        <div class="shop-name">Red Ship</div>
                        <div class="shop-owned" id="skinRedStatus">Not owned</div>
                        <button class="shop-buy-btn" data-item="skin_red" data-cost="300">300 gems</button>
                    </div>
                    <div class="shop-item" data-item="skin_gold">
                        <div class="shop-icon" style="color:#f39c12">Ship</div>
                        <div class="shop-name">Gold Ship</div>
                        <div class="shop-owned" id="skinGoldStatus">Not owned</div>
                        <button class="shop-buy-btn" data-item="skin_gold" data-cost="300">300 gems</button>
                    </div>
                    <div class="shop-item" data-item="skin_purple">
                        <div class="shop-icon" style="color:#9b59b6">Ship</div>
                        <div class="shop-name">Purple Ship</div>
                        <div class="shop-owned" id="skinPurpleStatus">Not owned</div>
                        <button class="shop-buy-btn" data-item="skin_purple" data-cost="300">300 gems</button>
                    </div>
                </div>
                <button id="closeShopBtn" class="close-btn">CLOSE</button>
            </div>
        </div>
    </div>
    <script src="game.js?v=3"></script>
    <script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js');
    }
    </script>
</body>
</html>